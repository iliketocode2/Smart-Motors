<!DOCTYPE html>
<html>
<head>
    <title>SmartMotor WebSocket Monitor</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.8.2/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.8.2/core.js"></script>
</head>
<body>
    <h1>SmartMotor WebSocket Monitor</h1>
    <p>Monitor WebSocket traffic between ESP32 SmartMotors</p>
    
    <h2>Architecture:</h2>
    <p><strong>Controller ESP32</strong> → WiFi → WebSocket Channel → WiFi → <strong>Receiver ESP32</strong></p>
    <p>This page monitors the WebSocket channel traffic</p>
    
    <h2>WebSocket URL for ESP32 Programming:</h2>
    <code>wss://chrisrogers.pyscriptapps.com/talking-on-a-channel/api/channels/hackathon</code>
    
    <div id="channel_status">
        <h3>Channel Status: LOADING...</h3>
    </div>
    
    <h2>Controls:</h2>
    <button id="start_monitor">Start Monitor</button>
    <button id="stop_monitor">Stop Monitor</button>
    <button id="reset_counters">Reset Counters</button>
    <button id="send_test_command">Send Test Servo Command</button>
    <button id="clear_log">Clear Message Log</button>
    
    <h2>Live Message Log:</h2>
    <div id="message_log" style="border: 1px solid #ccc; padding: 10px; height: 200px; overflow-y: scroll; background: #f9f9f9;">
        <!-- Messages will appear here -->
    </div>
    
    <h2>Channel Connection:</h2>
    <div id='all_things_channels'></div>
    
    <h2>Local BLE Testing (Optional):</h2>
    <div id='all_things_ble'></div>
    <p><em>Use this to test by connecting a SmartMotor locally and posting data to the channel</em></p>
    
    <h2>Serial Connection (Optional):</h2>
    <div id='all_things_rs232'></div>
    
    <script type="mpy" src="./main.py" config="./pyscript.toml"></script>
</body>
</html>
